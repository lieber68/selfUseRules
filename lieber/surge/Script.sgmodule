#!name=自用模块
#!desc=自用

[General]
loglevel = notify
# 从 Surge iOS 4 / Surge Mac 3.3.0 起，工具开始支持 DoH
doh-server = https://doh.pub/dns-query, https://dns.alidns.com/dns-query
# https://dns.alidns.com/dns-query, https://13800000000.rubyfish.cn/, https://doh.360.cn/dns-query, https://dns.google/dns-query
dns-server = 223.5.5.5, 119.29.29.29, system
tun-excluded-routes = 0.0.0.0/8, 10.0.0.0/8, 100.64.0.0/10, 127.0.0.0/8, 169.254.0.0/16, 172.16.0.0/12, 192.0.0.0/24, 192.0.2.0/24, 192.168.0.0/16, 192.88.99.0/24, 198.51.100.0/24, 203.0.113.0/24, 224.0.0.0/4, 255.255.255.255/32
skip-proxy = localhost, *.local, injections.adguard.org, local.adguard.org, captive.apple.com, guzzoni.apple.com, 0.0.0.0/8, 10.0.0.0/8, 17.0.0.0/8, 100.64.0.0/10, 127.0.0.0/8, 169.254.0.0/16, 172.16.0.0/12, 192.0.0.0/24, 192.0.2.0/24, 192.168.0.0/16, 192.88.99.0/24, 198.18.0.0/15, 198.51.100.0/24, 203.0.113.0/24, 224.0.0.0/4, 240.0.0.0/4, 255.255.255.255/32
wifi-assist = true
allow-wifi-access = true
wifi-access-http-port = 6152
wifi-access-socks5-port = 6153
http-listen = 0.0.0.0:6152
socks5-listen = 0.0.0.0:6153
external-controller-access = lieber@0.0.0.0:6170
replica = false
tls-provider = openssl
network-framework = false
exclude-simple-hostnames = true
ipv6 = true
test-timeout = 4
proxy-test-url = http://www.gstatic.com/generate_204
geoip-maxmind-url = https://lieberplus.coding.net/p/AllRules/d/AllRules/git/raw/master/Hackl0us/GeoIP2-CN/Country.mmdb
internet-test-url = http://www.aliyun.com

[Replica]
hide-apple-request = true
hide-crashlytics-request = true
use-keyword-filter = false
hide-udp = false

[Host]
*.taobao.com = server:223.5.5.5
*.tmall.com = server:223.5.5.5
*.jd.com = server:119.28.28.28
*.qq.com = server:119.28.28.28
*.tencent.com = server:119.28.28.28
*.alicdn.com = server:223.5.5.5
*.aliyun.com = server:223.5.5.5
*.weixin.com = server:119.28.28.28
*.163.com = server:119.29.29.29
*.126.com = server:119.29.29.29
*.126.net = server:119.29.29.29
*.127.net = server:119.29.29.29
*.netease.com = server:119.29.29.29
*.mi.com = server:119.29.29.29
*.xiaomi.com = server:119.29.29.29
*.bilibili.com = server:119.29.29.29
iosapps.itunes.apple.com = script:dnspod
dl.google.com = server:119.29.29.29
dl.l.google.com = server:119.29.29.29

[Rule]

[Script]
# 微信去广告
微信去广告 = type=http-response,pattern=^https?:\/\/mp\.weixin\.qq\.com\/mp\/getappmsgad,max-size=0,script-path=https://lieberplus.coding.net/p/AllRules/d/AllRules/git/raw/master/NobyDa/Script/QuantumultX/File/Wechat.js, requires-body=true, timeout=120

# > 微信 App 内被屏蔽链接快捷跳转
weixin110.js = type=http-response,requires-body=1,max-size=-1,pattern=^https?:\/\/weixin110\.qq\.com\/cgi-bin\/mmspamsupport-bin\/newredirectconfirmcgi,script-path=https://lieberplus.coding.net/p/AllRules/d/AllRules/git/raw/master/HotKids/Rules/Script/weixin110.js

# Boxjs
Rewrite: BoxJs = type=http-request,pattern=^https?://boxjs.com,script-path=https://lieberplus.coding.net/p/AllRules/d/AllRules/git/raw/master/chavyleung/scripts/chavy.box.js, requires-body=true, timeout=120
Rewrite: BoxJs = type=http-request,pattern=^https?://boxjs.net,script-path=https://lieberplus.coding.net/p/AllRules/d/AllRules/git/raw/master/chavyleung/scripts/box/chavy.boxjs.js, requires-body=true, timeout=120

Sub-Store = type=http-request,pattern=^https?:\/\/sub\.store,script-path=https://lieberplus.coding.net/p/AllRules/d/AllRules/git/raw/master/Peng-YM/Sub-Store/backend/sub-store.min.js,requires-body=true,timeout=120,max-size=131072

TF下载修正 = type=http-request,pattern=^https?:\/\/testflight\.apple\.com\/v\d\/accounts\/.+?\/install$,requires-body=1,max-size=0,script-path=https://lieberplus.coding.net/p/AllRules/d/AllRules/git/raw/master/lieber/surge/TF_Download.js

IPA应用安装 = type=http-request,pattern=^https:\/\/nobyda/(install|download)(\/jsbox)?$,requires-body=1,max-size=0,script-path=https://lieberplus.coding.net/p/AllRules/d/AllRules/git/raw/master/NobyDa/Script/Surge/JS/IPA_install.js

京东签到 = type=cron,cronexp="5 0,23 * * *",wake-system=1,timeout=100,script-path=https://lieberplus.coding.net/p/AllRules/d/AllRules/git/raw/master/NobyDa/Script/JD-DailyBonus/JD_DailyBonus.js,script-update-interval=21600
爱奇艺签到 = type=cron,cronexp=40 2 2 * * *,wake-system=1,script-path=https://lieberplus.coding.net/p/AllRules/d/AllRules/git/raw/master/NobyDa/Script/iQIYI-DailyBonus/iQIYI.js,script-update-interval=21600
腾讯视频签到 = type=cron,cronexp=30 3 1 * * *,wake-system=1,script-path=https://lieberplus.coding.net/p/AllRules/d/AllRules/git/raw/master/chavyleung/scripts/videoqq/videoqq.js,script-update-interval=21600
时光相册签到 = type=cron,cronexp=50 5 1 * * *,wake-system=1,script-path=https://lieberplus.coding.net/p/AllRules/d/AllRules/git/raw/master/chavyleung/scripts/everphoto/everphoto.js,script-update-interval=21600
bilibili签到 = type=cron,cronexp=40 3 1 * * *,wake-system=1,script-path=https://lieberplus.coding.net/p/AllRules/d/AllRules/git/raw/master/chavyleung/scripts/bilibili/bilibili.js,script-update-interval=21600
网易云音乐签到 = type=cron,cronexp=40 2 1 * * *,wake-system=1,script-path=https://lieberplus.coding.net/p/AllRules/d/AllRules/git/raw/master/chavyleung/scripts/neteasemusic/neteasemusic.js,script-update-interval=21600

[MITM]
hostname = %APPEND% trade-acs.m.taobao.com,api.m.jd.com,mp.weixin.qq.com, ios.prod.ftl.netflix.com, weixin110.qq.com,*.tiktokv.com,*.byteoversea.com,*.tik-tokapi.com, raw.githubusercontent.com, gist.githubusercontent.com, sub.store, duckduckgo.com, testflight.apple.com, nobyda
